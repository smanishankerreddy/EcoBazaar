"use strict";(self.webpackChunkecobazaar=self.webpackChunkecobazaar||[]).push([[805],{5805:(B,u,i)=>{i.r(u),i.d(u,{ProductListComponent:()=>U});var d=i(2881),_=i(5207),g=i(9417),l=i(5596),m=i(8834),h=i(6863),P=i(6704),f=i(4773),C=i(6471),E=i(9980),M=i(7359),v=i(6042),O=i(8010),t=i(1360),F=i(5567),L=i(2852),p=i(2928),R=i(4564);const x=n=>["/products",n];function I(n,c){1&n&&(t.j41(0,"button",20),t.EFF(1,"Login"),t.k0s())}function b(n,c){1&n&&(t.j41(0,"button",21),t.EFF(1,"Profile"),t.k0s())}function D(n,c){if(1&n&&(t.j41(0,"mat-option",22),t.EFF(1),t.k0s()),2&n){const o=c.$implicit;t.Y8G("value",o),t.R7$(),t.SpI(" ",o," ")}}function T(n,c){1&n&&(t.j41(0,"mat-chip",34),t.EFF(1," Eco Certified "),t.k0s())}function y(n,c){if(1&n){const o=t.RV6();t.j41(0,"mat-card",25),t.nrm(1,"img",26),t.j41(2,"mat-card-header")(3,"mat-card-title"),t.EFF(4),t.k0s(),t.j41(5,"mat-card-subtitle"),t.EFF(6),t.k0s()(),t.j41(7,"mat-card-content")(8,"p",27),t.EFF(9),t.k0s(),t.j41(10,"div",28)(11,"div",29),t.EFF(12),t.nI1(13,"number"),t.k0s(),t.j41(14,"div",30)(15,"mat-chip"),t.EFF(16),t.k0s(),t.DNE(17,T,2,0,"mat-chip",31),t.k0s()()(),t.j41(18,"mat-card-actions")(19,"button",32),t.EFF(20," View Details "),t.k0s(),t.j41(21,"button",33),t.bIt("click",function(){const e=t.eBV(o).$implicit,s=t.XpG(2);return t.Njj(s.addToCart(e))}),t.EFF(22," Add to Cart "),t.k0s()()()}if(2&n){const o=c.$implicit,r=t.XpG(2);t.R7$(),t.Y8G("src",o.imageUrl||"https://via.placeholder.com/300",t.B4B)("alt",o.name),t.R7$(3),t.JRh(o.name),t.R7$(2),t.JRh(o.category),t.R7$(3),t.JRh(o.description),t.R7$(3),t.SpI("$",t.i5U(13,11,o.price,"1.2-2"),""),t.R7$(3),t.xc7("background-color",r.getEcoRatingColor(o.ecoRating)),t.R7$(),t.SpI(" ",o.carbonImpact," kg CO\u2082e "),t.R7$(),t.Y8G("ngIf",o.ecoCertified),t.R7$(2),t.Y8G("routerLink",t.eq3(14,x,o.id))}}function k(n,c){if(1&n&&(t.j41(0,"div",23),t.DNE(1,y,23,16,"mat-card",24),t.k0s()),2&n){const o=t.XpG();t.R7$(),t.Y8G("ngForOf",o.filteredProducts)}}function j(n,c){1&n&&(t.j41(0,"div",35)(1,"p"),t.EFF(2,"Loading products..."),t.k0s()())}function A(n,c){1&n&&(t.j41(0,"div",36)(1,"p"),t.EFF(2,"No products available. Please make sure the backend is running."),t.k0s(),t.j41(3,"p",37),t.EFF(4,"Backend should be running on http://localhost:8080"),t.k0s()())}function S(n,c){1&n&&(t.j41(0,"div",36)(1,"p"),t.EFF(2,"No products found matching your criteria."),t.k0s()())}let U=(()=>{class n{constructor(o,r,e,s,a){this.productService=o,this.cartService=r,this.authService=e,this.notificationService=s,this.router=a,this.products=[],this.filteredProducts=[],this.searchTerm="",this.selectedCategory="",this.selectedEcoRating="",this.categories=[],this.isLoading=!1,console.log("ProductListComponent constructor called")}get isLoggedIn(){return this.authService.isLoggedIn()}ngOnInit(){console.log("ProductListComponent initialized"),this.loadProducts()}loadProducts(){this.isLoading=!0,this.productService.getProducts().subscribe({next:o=>{const r=(o||[]).filter(e=>e?.isActive&&e?.isApproved);this.products=r,this.filteredProducts=r,this.categories=[...new Set(r.map(e=>e.category).filter(e=>null!=e))],this.isLoading=!1},error:o=>{console.error("Error loading products:",o),this.products=[],this.filteredProducts=[],this.isLoading=!1,alert("Failed to load products. Please make sure the backend is running on http://localhost:8080")}})}onSearch(){this.applyFilters()}onCategoryChange(){this.applyFilters()}onEcoRatingChange(){this.applyFilters()}applyFilters(){this.filteredProducts=this.products.filter(o=>!(!o?.isActive||!o?.isApproved)&&((!this.searchTerm||o.name.toLowerCase().includes(this.searchTerm.toLowerCase())||o.description.toLowerCase().includes(this.searchTerm.toLowerCase()))&&(!this.selectedCategory||o.category===this.selectedCategory)&&(!this.selectedEcoRating||o.ecoRating===this.selectedEcoRating)))}getEcoRatingColor(o){switch(o){case"EXCELLENT":return"green";case"GOOD":return"blue";case"FAIR":return"orange";case"POOR":return"red";default:return"gray"}}addToCart(o){if(!this.authService.isLoggedIn())return this.notificationService.showWarning("Please login to add items to cart."),void this.router.navigate(["/auth/login"]);"USER"===this.authService.getUserRole()?this.cartService.addToCart(o.id,1).subscribe({next:()=>{this.notificationService.showSuccess(`${o.name} added to cart successfully!`)},error:r=>{console.error("Error adding to cart:",r),this.notificationService.showError(r.error?.message||"Failed to add product to cart. Please try again.")}}):this.notificationService.showWarning("Only users can add items to cart.")}static{this.\u0275fac=function(r){return new(r||n)(t.rXU(M.b),t.rXU(v.m),t.rXU(O.u),t.rXU(F.J),t.rXU(L.Ix))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-product-list"]],decls:39,vars:10,consts:[[1,"product-list-container"],[1,"header-section"],[1,"auth-buttons",2,"margin-left","auto"],["mat-raised-button","","color","primary","routerLink","/auth/login","style","margin-right: 10px;",4,"ngIf"],["mat-raised-button","","color","accent","routerLink","/profile",4,"ngIf"],[1,"filters-section"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by name or description",3,"ngModelChange","input","ngModel"],["matPrefix",""],["appearance","outline"],[3,"ngModelChange","selectionChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","EXCELLENT"],["value","GOOD"],["value","FAIR"],["value","POOR"],["class","products-grid",4,"ngIf"],["class","loading",4,"ngIf"],["class","no-products",4,"ngIf"],["mat-raised-button","","color","primary","routerLink","/auth/login",2,"margin-right","10px"],["mat-raised-button","","color","accent","routerLink","/profile"],[3,"value"],[1,"products-grid"],["class","product-card",4,"ngFor","ngForOf"],[1,"product-card"],[1,"product-image",3,"src","alt"],[1,"product-description"],[1,"product-info"],[1,"price"],[1,"carbon-impact"],["color","primary",4,"ngIf"],["mat-raised-button","","color","primary",3,"routerLink"],["mat-raised-button","","color","accent",3,"click"],["color","primary"],[1,"loading"],[1,"no-products"],[2,"font-size","12px","color","#666"]],template:function(r,e){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3,"EcoBazaar - Carbon Footprint Aware Shopping"),t.k0s(),t.j41(4,"div",2),t.DNE(5,I,2,0,"button",3)(6,b,2,0,"button",4),t.k0s(),t.j41(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),t.EFF(10,"Search Products"),t.k0s(),t.j41(11,"input",7),t.mxI("ngModelChange",function(a){return t.DH7(e.searchTerm,a)||(e.searchTerm=a),a}),t.bIt("input",function(){return e.onSearch()}),t.k0s(),t.j41(12,"mat-icon",8),t.EFF(13,"search"),t.k0s()(),t.j41(14,"mat-form-field",9)(15,"mat-label"),t.EFF(16,"Category"),t.k0s(),t.j41(17,"mat-select",10),t.mxI("ngModelChange",function(a){return t.DH7(e.selectedCategory,a)||(e.selectedCategory=a),a}),t.bIt("selectionChange",function(){return e.onCategoryChange()}),t.j41(18,"mat-option",11),t.EFF(19,"All Categories"),t.k0s(),t.DNE(20,D,2,2,"mat-option",12),t.k0s()(),t.j41(21,"mat-form-field",9)(22,"mat-label"),t.EFF(23,"Eco Rating"),t.k0s(),t.j41(24,"mat-select",10),t.mxI("ngModelChange",function(a){return t.DH7(e.selectedEcoRating,a)||(e.selectedEcoRating=a),a}),t.bIt("selectionChange",function(){return e.onEcoRatingChange()}),t.j41(25,"mat-option",11),t.EFF(26,"All Ratings"),t.k0s(),t.j41(27,"mat-option",13),t.EFF(28,"Excellent"),t.k0s(),t.j41(29,"mat-option",14),t.EFF(30,"Good"),t.k0s(),t.j41(31,"mat-option",15),t.EFF(32,"Fair"),t.k0s(),t.j41(33,"mat-option",16),t.EFF(34,"Poor"),t.k0s()()()()(),t.DNE(35,k,2,1,"div",17)(36,j,3,0,"div",18)(37,A,5,0,"div",19)(38,S,3,0,"div",19),t.k0s()),2&r&&(t.R7$(5),t.Y8G("ngIf",!e.isLoggedIn),t.R7$(),t.Y8G("ngIf",e.isLoggedIn),t.R7$(5),t.R50("ngModel",e.searchTerm),t.R7$(6),t.R50("ngModel",e.selectedCategory),t.R7$(3),t.Y8G("ngForOf",e.categories),t.R7$(4),t.R50("ngModel",e.selectedEcoRating),t.R7$(11),t.Y8G("ngIf",!e.isLoading),t.R7$(),t.Y8G("ngIf",e.isLoading),t.R7$(),t.Y8G("ngIf",!e.isLoading&&0===e.filteredProducts.length&&0===e.products.length),t.R7$(),t.Y8G("ngIf",!e.isLoading&&0===e.filteredProducts.length&&e.products.length>0))},dependencies:[d.MD,d.Sq,d.bT,d.QX,_.iI,_.Wk,g.YN,g.me,g.BC,g.vS,l.Hu,l.RN,l.YY,l.m2,l.MM,l.Lc,l.dh,m.Hl,m.$z,h.fS,h.fg,p.j,p.M,p.e,P.M,f.M,f.g,R.M,C.YN,C.Jl,E.m_,E.An],styles:['.product-list-container[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto;min-height:calc(100vh - 64px)}.header-section[_ngcontent-%COMP%]{margin-bottom:32px;background:#fff;padding:24px;border-radius:12px;box-shadow:0 4px 12px #0000001a}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#2c3e50;margin:0 0 24px;font-size:32px;font-weight:600;display:flex;align-items:center;gap:12px}.filters-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr auto;gap:16px;align-items:center}.search-field[_ngcontent-%COMP%]{min-width:250px}.products-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:24px;margin-top:24px}.product-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;transition:all .3s ease;border:1px solid rgba(0,0,0,.05)}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #00000026!important}.product-image-container[_ngcontent-%COMP%]{position:relative;width:100%;height:240px;overflow:hidden;background:linear-gradient(135deg,#f5f7fa,#c3cfe2);border-radius:8px 8px 0 0}.product-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.product-card[_ngcontent-%COMP%]:hover   .product-image[_ngcontent-%COMP%]{transform:scale(1.05)}.product-content[_ngcontent-%COMP%]{padding:16px;flex:1;display:flex;flex-direction:column}.product-name[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#2c3e50;margin-bottom:8px}.product-description[_ngcontent-%COMP%]{color:#666;font-size:14px;line-height:1.5;min-height:60px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;margin-bottom:16px}.product-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:auto;padding-top:16px;border-top:1px solid #eee}.price[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#667eea;display:flex;align-items:baseline;gap:4px}.price[_ngcontent-%COMP%]:before{content:"$";font-size:18px}.carbon-impact[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}mat-card-actions[_ngcontent-%COMP%]{display:flex;gap:8px;padding:16px;margin:0}.loading[_ngcontent-%COMP%], .no-products[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;font-size:18px;color:#666;background:#fff;border-radius:12px;margin-top:24px}.loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:16px}@media (max-width: 768px){.filters-section[_ngcontent-%COMP%], .products-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}}']})}}return n})()}}]);