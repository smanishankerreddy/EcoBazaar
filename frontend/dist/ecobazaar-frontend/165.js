"use strict";(self.webpackChunkecobazaar=self.webpackChunkecobazaar||[]).push([[165],{3165:(B,_,a)=>{a.r(_),a.d(_,{RegisterComponent:()=>A});var g=a(2881),o=a(9417),u=a(5207),m=a(5596),C=a(6704),f=a(6863),c=a(8834),p=a(4773),R=a(8010),r=a(1360),O=a(2852),D=a(5567),d=a(2928),I=a(4564);function b(t,l){1&t&&(r.j41(0,"mat-error"),r.EFF(1," Name is required "),r.k0s())}function k(t,l){1&t&&(r.j41(0,"mat-error"),r.EFF(1," Email is required "),r.k0s())}function w(t,l){1&t&&(r.j41(0,"mat-error"),r.EFF(1," Invalid email format "),r.k0s())}function L(t,l){1&t&&(r.j41(0,"mat-error"),r.EFF(1," Password is required "),r.k0s())}function T(t,l){1&t&&(r.j41(0,"mat-error"),r.EFF(1," Password must be at least 6 characters "),r.k0s())}function j(t,l){1&t&&(r.j41(0,"mat-error"),r.EFF(1," Please confirm your password "),r.k0s())}function x(t,l){1&t&&(r.j41(0,"mat-error"),r.EFF(1," Passwords do not match "),r.k0s())}function S(t,l){if(1&t&&(r.j41(0,"mat-option",16),r.EFF(1),r.k0s()),2&t){const n=l.$implicit;r.Y8G("value",n.value),r.R7$(),r.SpI(" ",n.label," ")}}function U(t,l){if(1&t&&(r.j41(0,"div",17),r.EFF(1),r.k0s()),2&t){const n=r.XpG();r.R7$(),r.SpI(" ",n.errorMessage," ")}}let A=(()=>{class t{constructor(n,i,e,s){this.fb=n,this.authService=i,this.router=e,this.notificationService=s,this.isLoading=!1,this.roles=[{value:"USER",label:"User"},{value:"SELLER",label:"Seller"},{value:"ADMIN",label:"Admin"}],this.errorMessage="",this.registerForm=this.fb.group({name:["",[o.k0.required]],email:["",[o.k0.required,o.k0.email]],password:["",[o.k0.required,o.k0.minLength(6)]],confirmPassword:["",[o.k0.required]],role:["USER",[o.k0.required]],phone:[""],address:[""]},{validators:this.passwordMatchValidator})}passwordMatchValidator(n){const i=n.get("password"),e=n.get("confirmPassword");return i&&e&&i.value!==e.value?(e.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):null}onSubmit(){if(this.registerForm.valid){this.isLoading=!0,this.errorMessage="";const{confirmPassword:n,...i}=this.registerForm.value;this.authService.register(i).subscribe({next:e=>{this.notificationService.showSuccess("Registration successful! Welcome to EcoBazaar.");const s=e.role||i.role;this.router.navigate("ADMIN"===s?["/admin"]:"SELLER"===s?["/seller"]:["/products"])},error:e=>{console.error("Registration error:",e);const s=e.error?.message||"Registration failed. Please try again.";this.errorMessage=s,this.notificationService.showError(s),this.isLoading=!1},complete:()=>{this.isLoading=!1}})}}static{this.\u0275fac=function(i){return new(i||t)(r.rXU(o.ok),r.rXU(R.u),r.rXU(O.Ix),r.rXU(D.J))}}static{this.\u0275cmp=r.VBU({type:t,selectors:[["app-register"]],decls:51,vars:12,consts:[[1,"register-container"],[1,"register-card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["matInput","","type","email","formControlName","email","required",""],["matInput","","type","password","formControlName","password","required",""],["matInput","","type","password","formControlName","confirmPassword","required",""],["formControlName","role"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","phone"],["matInput","","formControlName","address","rows","3"],["class","error-message",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],["routerLink","/auth/login"],[3,"value"],[1,"error-message"]],template:function(i,e){if(1&i&&(r.j41(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),r.EFF(4,"Join EcoBazaar"),r.k0s()(),r.j41(5,"mat-card-content")(6,"form",2),r.bIt("ngSubmit",function(){return e.onSubmit()}),r.j41(7,"mat-form-field",3)(8,"mat-label"),r.EFF(9,"Full Name"),r.k0s(),r.nrm(10,"input",4),r.DNE(11,b,2,0,"mat-error",5),r.k0s(),r.j41(12,"mat-form-field",3)(13,"mat-label"),r.EFF(14,"Email"),r.k0s(),r.nrm(15,"input",6),r.DNE(16,k,2,0,"mat-error",5)(17,w,2,0,"mat-error",5),r.k0s(),r.j41(18,"mat-form-field",3)(19,"mat-label"),r.EFF(20,"Password"),r.k0s(),r.nrm(21,"input",7),r.DNE(22,L,2,0,"mat-error",5)(23,T,2,0,"mat-error",5),r.k0s(),r.j41(24,"mat-form-field",3)(25,"mat-label"),r.EFF(26,"Confirm Password"),r.k0s(),r.nrm(27,"input",8),r.DNE(28,j,2,0,"mat-error",5)(29,x,2,0,"mat-error",5),r.k0s(),r.j41(30,"mat-form-field",3)(31,"mat-label"),r.EFF(32,"Role"),r.k0s(),r.j41(33,"mat-select",9),r.DNE(34,S,2,2,"mat-option",10),r.k0s()(),r.j41(35,"mat-form-field",3)(36,"mat-label"),r.EFF(37,"Phone (Optional)"),r.k0s(),r.nrm(38,"input",11),r.k0s(),r.j41(39,"mat-form-field",3)(40,"mat-label"),r.EFF(41,"Address (Optional)"),r.k0s(),r.nrm(42,"textarea",12),r.k0s(),r.DNE(43,U,2,1,"div",13),r.j41(44,"button",14),r.EFF(45),r.k0s()()(),r.j41(46,"mat-card-footer")(47,"p"),r.EFF(48,"Already have an account? "),r.j41(49,"a",15),r.EFF(50,"Login here"),r.k0s()()()()()),2&i){let s,E,h,M,F,P,v;r.R7$(6),r.Y8G("formGroup",e.registerForm),r.R7$(5),r.Y8G("ngIf",null==(s=e.registerForm.get("name"))?null:s.hasError("required")),r.R7$(5),r.Y8G("ngIf",null==(E=e.registerForm.get("email"))?null:E.hasError("required")),r.R7$(),r.Y8G("ngIf",null==(h=e.registerForm.get("email"))?null:h.hasError("email")),r.R7$(5),r.Y8G("ngIf",null==(M=e.registerForm.get("password"))?null:M.hasError("required")),r.R7$(),r.Y8G("ngIf",null==(F=e.registerForm.get("password"))?null:F.hasError("minlength")),r.R7$(5),r.Y8G("ngIf",null==(P=e.registerForm.get("confirmPassword"))?null:P.hasError("required")),r.R7$(),r.Y8G("ngIf",null==(v=e.registerForm.get("confirmPassword"))?null:v.hasError("passwordMismatch")),r.R7$(5),r.Y8G("ngForOf",e.roles),r.R7$(9),r.Y8G("ngIf",e.errorMessage),r.R7$(),r.Y8G("disabled",e.isLoading||e.registerForm.invalid),r.R7$(),r.SpI(" ",e.isLoading?"Registering...":"Register"," ")}},dependencies:[g.MD,g.Sq,g.bT,o.X1,o.qT,o.me,o.BC,o.cb,o.YS,o.j4,o.JD,u.iI,u.Wk,m.Hu,m.RN,m.m2,m.WQ,m.MM,m.dh,C.M,d.j,d.M,d.b,f.fS,f.fg,c.Hl,c.$z,p.M,p.g,I.M],styles:['.register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px;background:linear-gradient(135deg,#667eea,#764ba2);position:relative;overflow:hidden}.register-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 1px,transparent 1px);background-size:50px 50px;animation:_ngcontent-%COMP%_move 20s linear infinite}@keyframes _ngcontent-%COMP%_move{0%{transform:translate(0)}to{transform:translate(50px,50px)}}.register-card[_ngcontent-%COMP%]{width:100%;max-width:600px;position:relative;z-index:1;backdrop-filter:blur(10px);background:#fffffff2;max-height:90vh;overflow-y:auto}mat-card-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}mat-card-title[_ngcontent-%COMP%]{font-size:24px;font-weight:500}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}mat-card-footer[_ngcontent-%COMP%]{text-align:center;padding:16px;margin-top:16px}mat-card-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:500}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.error-message[_ngcontent-%COMP%]{color:#f44336;background-color:#ffebee;padding:12px;border-radius:4px;margin-bottom:16px;font-size:14px}']})}}return t})()}}]);