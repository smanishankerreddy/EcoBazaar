"use strict";(self.webpackChunkecobazaar=self.webpackChunkecobazaar||[]).push([[461],{461:(R,_,e)=>{e.r(_),e.d(_,{LoginComponent:()=>I});var c=e(2881),n=e(9417),d=e(5207),s=e(5596),M=e(6704),u=e(6863),f=e(8834),v=e(8010),t=e(1360),P=e(2852),C=e(5567),g=e(2928);function O(r,m){1&r&&(t.j41(0,"mat-error"),t.EFF(1," Email is required "),t.k0s())}function L(r,m){1&r&&(t.j41(0,"mat-error"),t.EFF(1," Invalid email format "),t.k0s())}function F(r,m){1&r&&(t.j41(0,"mat-error"),t.EFF(1," Password is required "),t.k0s())}function D(r,m){1&r&&(t.j41(0,"mat-error"),t.EFF(1," Password must be at least 6 characters "),t.k0s())}function b(r,m){if(1&r&&(t.j41(0,"div",10),t.EFF(1),t.k0s()),2&r){const i=t.XpG();t.R7$(),t.SpI(" ",i.errorMessage," ")}}let I=(()=>{class r{constructor(i,o,a,l){this.fb=i,this.authService=o,this.router=a,this.notificationService=l,this.isLoading=!1,this.errorMessage="",this.loginForm=this.fb.group({email:["",[n.k0.required,n.k0.email]],password:["",[n.k0.required,n.k0.minLength(6)]]})}onSubmit(){this.loginForm.valid&&(this.isLoading=!0,this.errorMessage="",this.authService.login(this.loginForm.value.email,this.loginForm.value.password).subscribe({next:i=>{this.notificationService.showSuccess("Login successful! Welcome to EcoBazaar.");const o=i.role||localStorage.getItem("role");this.router.navigate("ADMIN"===o?["/admin"]:"SELLER"===o?["/seller"]:["/products"])},error:i=>{console.error("Login error:",i);const o=i.error?.message||"Login failed. Please check your credentials.";this.errorMessage=o,this.notificationService.showError(o),this.isLoading=!1},complete:()=>{this.isLoading=!1}}))}static{this.\u0275fac=function(o){return new(o||r)(t.rXU(n.ok),t.rXU(v.u),t.rXU(P.Ix),t.rXU(C.J))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-login"]],decls:27,vars:8,consts:[[1,"login-container"],[1,"login-card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","type","email","formControlName","email","required",""],[4,"ngIf"],["matInput","","type","password","formControlName","password","required",""],["class","error-message",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],["routerLink","/auth/register"],[1,"error-message"]],template:function(o,a){if(1&o&&(t.j41(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),t.EFF(4,"Login to EcoBazaar"),t.k0s()(),t.j41(5,"mat-card-content")(6,"form",2),t.bIt("ngSubmit",function(){return a.onSubmit()}),t.j41(7,"mat-form-field",3)(8,"mat-label"),t.EFF(9,"Email"),t.k0s(),t.nrm(10,"input",4),t.DNE(11,O,2,0,"mat-error",5)(12,L,2,0,"mat-error",5),t.k0s(),t.j41(13,"mat-form-field",3)(14,"mat-label"),t.EFF(15,"Password"),t.k0s(),t.nrm(16,"input",6),t.DNE(17,F,2,0,"mat-error",5)(18,D,2,0,"mat-error",5),t.k0s(),t.DNE(19,b,2,1,"div",7),t.j41(20,"button",8),t.EFF(21),t.k0s()()(),t.j41(22,"mat-card-footer")(23,"p"),t.EFF(24,"Don't have an account? "),t.j41(25,"a",9),t.EFF(26,"Register here"),t.k0s()()()()()),2&o){let l,p,h,E;t.R7$(6),t.Y8G("formGroup",a.loginForm),t.R7$(5),t.Y8G("ngIf",null==(l=a.loginForm.get("email"))?null:l.hasError("required")),t.R7$(),t.Y8G("ngIf",null==(p=a.loginForm.get("email"))?null:p.hasError("email")),t.R7$(5),t.Y8G("ngIf",null==(h=a.loginForm.get("password"))?null:h.hasError("required")),t.R7$(),t.Y8G("ngIf",null==(E=a.loginForm.get("password"))?null:E.hasError("minlength")),t.R7$(),t.Y8G("ngIf",a.errorMessage),t.R7$(),t.Y8G("disabled",a.isLoading||a.loginForm.invalid),t.R7$(),t.SpI(" ",a.isLoading?"Logging in...":"Login"," ")}},dependencies:[c.MD,c.bT,n.X1,n.qT,n.me,n.BC,n.cb,n.YS,n.j4,n.JD,d.iI,d.Wk,s.Hu,s.RN,s.m2,s.WQ,s.MM,s.dh,M.M,g.j,g.M,g.b,u.fS,u.fg,f.Hl,f.$z],styles:['.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px;background:linear-gradient(135deg,#667eea,#764ba2);position:relative;overflow:hidden}.login-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 1px,transparent 1px);background-size:50px 50px;animation:_ngcontent-%COMP%_move 20s linear infinite}@keyframes _ngcontent-%COMP%_move{0%{transform:translate(0)}to{transform:translate(50px,50px)}}.login-card[_ngcontent-%COMP%]{width:100%;max-width:450px;position:relative;z-index:1;backdrop-filter:blur(10px);background:#fffffff2}mat-card-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}mat-card-title[_ngcontent-%COMP%]{font-size:24px;font-weight:500}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}mat-card-footer[_ngcontent-%COMP%]{text-align:center;padding:16px;margin-top:16px}mat-card-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:500}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.error-message[_ngcontent-%COMP%]{color:#f44336;background-color:#ffebee;padding:12px;border-radius:4px;margin-bottom:16px;font-size:14px}']})}}return r})()}}]);