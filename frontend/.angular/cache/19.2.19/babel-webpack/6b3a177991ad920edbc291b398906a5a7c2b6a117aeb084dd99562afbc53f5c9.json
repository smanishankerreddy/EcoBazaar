{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { NavigationEnd, Router, RouterModule } from '@angular/router';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatBadgeModule } from '@angular/material/badge';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { AuthService } from '../../services/auth.service';\nimport { CartService } from '../../services/cart.service';\nimport { filter } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"../../services/cart.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/toolbar\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/icon\";\nimport * as i8 from \"@angular/material/menu\";\nimport * as i9 from \"@angular/material/badge\";\nimport * as i10 from \"@angular/material/divider\";\nfunction NavbarComponent_a_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 12)(1, \"mat-icon\", 13);\n    i0.ɵɵtext(2, \"shopping_cart\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Cart \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"matBadge\", ctx_r0.cartItemCount);\n  }\n}\nfunction NavbarComponent_a_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 14)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"inventory\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Seller Dashboard \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NavbarComponent_a_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 15)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"admin_panel_settings\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Admin \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NavbarComponent_ng_container_16_button_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 24)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"dashboard\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4, \"My Dashboard\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction NavbarComponent_ng_container_16_button_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 25)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"shopping_cart\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4, \"Cart\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction NavbarComponent_ng_container_16_button_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 26)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"inventory\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4, \"Seller Dashboard\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction NavbarComponent_ng_container_16_button_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 27)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"admin_panel_settings\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4, \"Admin Dashboard\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction NavbarComponent_ng_container_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 16)(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"account_circle\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4);\n    i0.ɵɵelementStart(5, \"mat-icon\");\n    i0.ɵɵtext(6, \"arrow_drop_down\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"mat-menu\", null, 1);\n    i0.ɵɵtemplate(9, NavbarComponent_ng_container_16_button_9_Template, 5, 0, \"button\", 17)(10, NavbarComponent_ng_container_16_button_10_Template, 5, 0, \"button\", 18)(11, NavbarComponent_ng_container_16_button_11_Template, 5, 0, \"button\", 19)(12, NavbarComponent_ng_container_16_button_12_Template, 5, 0, \"button\", 20);\n    i0.ɵɵelement(13, \"mat-divider\");\n    i0.ɵɵelementStart(14, \"button\", 21)(15, \"mat-icon\");\n    i0.ɵɵtext(16, \"person\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"span\");\n    i0.ɵɵtext(18, \"Profile\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"button\", 22)(20, \"mat-icon\");\n    i0.ɵɵtext(21, \"badge\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"span\");\n    i0.ɵɵtext(23);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(24, \"mat-divider\");\n    i0.ɵɵelementStart(25, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function NavbarComponent_ng_container_16_Template_button_click_25_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.logout());\n    });\n    i0.ɵɵelementStart(26, \"mat-icon\");\n    i0.ɵɵtext(27, \"logout\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"span\");\n    i0.ɵɵtext(29, \"Logout\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const userMenu_r3 = i0.ɵɵreference(8);\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"matMenuTriggerFor\", userMenu_r3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.userName || \"User\", \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.userRole === \"USER\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.userRole === \"USER\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.userRole === \"SELLER\" || ctx_r0.userRole === \"ADMIN\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.userRole === \"ADMIN\");\n    i0.ɵɵadvance(11);\n    i0.ɵɵtextInterpolate1(\"Role: \", ctx_r0.getRoleLabel(ctx_r0.userRole), \"\");\n  }\n}\nfunction NavbarComponent_ng_template_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 28)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"login\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Login \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let NavbarComponent = /*#__PURE__*/(() => {\n  class NavbarComponent {\n    constructor(authService, cartService, router) {\n      this.authService = authService;\n      this.cartService = cartService;\n      this.router = router;\n      this.cartItemCount = 0;\n    }\n    ngOnInit() {\n      // Refresh on initial load and after every navigation (covers login/register redirects)\n      this.refreshUserState();\n      this.sub = this.router.events.pipe(filter(e => e instanceof NavigationEnd)).subscribe(() => this.refreshUserState());\n    }\n    ngOnDestroy() {\n      this.sub?.unsubscribe();\n    }\n    get userName() {\n      return this.authService.getUserName();\n    }\n    get userRole() {\n      return this.authService.getUserRole();\n    }\n    refreshUserState() {\n      this.loadCartCount();\n    }\n    loadCartCount() {\n      if (this.authService.isLoggedIn() && this.userRole === 'USER') {\n        this.cartService.getCart().subscribe({\n          next: cart => {\n            this.cartItemCount = cart?.items?.length || 0;\n          },\n          error: () => {\n            this.cartItemCount = 0;\n          }\n        });\n      } else {\n        this.cartItemCount = 0;\n      }\n    }\n    logout() {\n      this.authService.logout();\n    }\n    getRoleLabel(role) {\n      if (!role) return '';\n      const roleMap = {\n        'USER': 'User',\n        'SELLER': 'Seller',\n        'ADMIN': 'Admin'\n      };\n      return roleMap[role] || role;\n    }\n    canAccessProducts() {\n      return true; // Everyone can access products\n    }\n    canAccessCart() {\n      return this.userRole === 'USER';\n    }\n    canAccessProfile() {\n      return this.authService.isLoggedIn();\n    }\n    canAccessSeller() {\n      return this.userRole === 'SELLER' || this.userRole === 'ADMIN';\n    }\n    canAccessAdmin() {\n      return this.userRole === 'ADMIN';\n    }\n    static {\n      this.ɵfac = function NavbarComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || NavbarComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.CartService), i0.ɵɵdirectiveInject(i3.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: NavbarComponent,\n        selectors: [[\"app-navbar\"]],\n        decls: 19,\n        vars: 5,\n        consts: [[\"loginButton\", \"\"], [\"userMenu\", \"matMenu\"], [\"color\", \"primary\", 1, \"navbar\"], [1, \"navbar-content\"], [\"routerLink\", \"/products\", 1, \"logo\"], [1, \"nav-links\"], [\"mat-button\", \"\", \"routerLink\", \"/products\", \"routerLinkActive\", \"active\"], [\"mat-button\", \"\", \"routerLink\", \"/cart\", \"routerLinkActive\", \"active\", 4, \"ngIf\"], [\"mat-button\", \"\", \"routerLink\", \"/seller\", \"routerLinkActive\", \"active\", 4, \"ngIf\"], [\"mat-button\", \"\", \"routerLink\", \"/admin\", \"routerLinkActive\", \"active\", 4, \"ngIf\"], [1, \"user-menu\"], [4, \"ngIf\", \"ngIfElse\"], [\"mat-button\", \"\", \"routerLink\", \"/cart\", \"routerLinkActive\", \"active\"], [\"matBadgeColor\", \"accent\", 3, \"matBadge\"], [\"mat-button\", \"\", \"routerLink\", \"/seller\", \"routerLinkActive\", \"active\"], [\"mat-button\", \"\", \"routerLink\", \"/admin\", \"routerLinkActive\", \"active\"], [\"mat-button\", \"\", 3, \"matMenuTriggerFor\"], [\"mat-menu-item\", \"\", \"routerLink\", \"/dashboard\", 4, \"ngIf\"], [\"mat-menu-item\", \"\", \"routerLink\", \"/cart\", 4, \"ngIf\"], [\"mat-menu-item\", \"\", \"routerLink\", \"/seller\", 4, \"ngIf\"], [\"mat-menu-item\", \"\", \"routerLink\", \"/admin\", 4, \"ngIf\"], [\"mat-menu-item\", \"\", \"routerLink\", \"/profile\"], [\"mat-menu-item\", \"\", \"disabled\", \"\"], [\"mat-menu-item\", \"\", 3, \"click\"], [\"mat-menu-item\", \"\", \"routerLink\", \"/dashboard\"], [\"mat-menu-item\", \"\", \"routerLink\", \"/cart\"], [\"mat-menu-item\", \"\", \"routerLink\", \"/seller\"], [\"mat-menu-item\", \"\", \"routerLink\", \"/admin\"], [\"mat-button\", \"\", \"routerLink\", \"/auth/login\"]],\n        template: function NavbarComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"mat-toolbar\", 2)(1, \"div\", 3)(2, \"a\", 4)(3, \"mat-icon\");\n            i0.ɵɵtext(4, \"eco\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"span\");\n            i0.ɵɵtext(6, \"EcoBazaar\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(7, \"div\", 5)(8, \"a\", 6)(9, \"mat-icon\");\n            i0.ɵɵtext(10, \"store\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(11, \" Products \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(12, NavbarComponent_a_12_Template, 4, 1, \"a\", 7)(13, NavbarComponent_a_13_Template, 4, 0, \"a\", 8)(14, NavbarComponent_a_14_Template, 4, 0, \"a\", 9);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"div\", 10);\n            i0.ɵɵtemplate(16, NavbarComponent_ng_container_16_Template, 30, 7, \"ng-container\", 11)(17, NavbarComponent_ng_template_17_Template, 4, 0, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            const loginButton_r4 = i0.ɵɵreference(18);\n            i0.ɵɵadvance(12);\n            i0.ɵɵproperty(\"ngIf\", ctx.canAccessCart());\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.canAccessSeller());\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.canAccessAdmin());\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.authService.isLoggedIn())(\"ngIfElse\", loginButton_r4);\n          }\n        },\n        dependencies: [CommonModule, i4.NgIf, RouterModule, i3.RouterLink, i3.RouterLinkActive, MatToolbarModule, i5.MatToolbar, MatButtonModule, i6.MatAnchor, i6.MatButton, MatIconModule, i7.MatIcon, MatMenuModule, i8.MatMenu, i8.MatMenuItem, i8.MatMenuTrigger, MatBadgeModule, i9.MatBadge, MatDividerModule, i10.MatDivider],\n        styles: [\".navbar[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000;box-shadow:0 4px 12px #00000026;background:linear-gradient(135deg,#667eea,#764ba2)!important}.navbar-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;max-width:1400px;margin:0 auto;padding:0 16px}.logo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#fff;text-decoration:none;font-size:20px;font-weight:500;margin-right:32px}.logo[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.nav-links[_ngcontent-%COMP%]{display:flex;gap:8px;flex:1}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.nav-links[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#ffffff1a}.user-menu[_ngcontent-%COMP%]{display:flex;align-items:center}.user-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff}@media (max-width: 768px){.nav-links[_ngcontent-%COMP%], .logo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}\"]\n      });\n    }\n  }\n  return NavbarComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}